<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Homework 10 (Zhihan Zhang)</title>
        <link href="/css/style.css" rel="stylesheet" type="text/css"/>
        <script src="/script/jquery-3.4.1.min.js"></script>
        <script src="/script/core_value.js"></script>
        <style>
            img {
                max-width: 600px;
                padding: 20px 20px;
            }
            #attack_img {
                max-width: 900px;
            }
            #sql_normal {
                max-width: 225px;
            }
        </style>
    </head>
    <body>
        <div class="header">
            <a href='/index.html'>
                <img src="/xiaosong'e.jpg" width=100 height=100 alt="My portrait">
            </a>
            <span style="display: inline"><b class="web_title">Homework 10</b></span>
            <hr>
        </div> 
        <div id="hw10-1" style="padding-left: 20px;">
            <p>
                <b>Q1</b>: Try attacking your "survey" app with code injection.
            <p>
                <b>A1</b>: First off, I tried to inject HTML and JavaScript codes through the 
                "Email" field in my questionare in homework 4. However, although I did not
                perform any input verification for the "Email" field while finishing homework 4,
                the injection didn't work and the plain text of code were displayed. 
                I then realized that I used <b>htmlspecialchars</b> method in PHP scripts that transforms
                special HTML characters like "&gt;" automatically. So here was what I got:
            </p>
            <div class='image'>
                <img src="/hw10/normal.png" alt="normal_img" id="normal_img">
            </div>
            <p>
                It is obvious that the plain text in the "Email" field of last four lines were the codes
                that I tried to inject by typing them in the input box.
            </p>
            <p>
                After removing the <b>htmlspecialchars</b> method temporarily from my source code, I 
                got the following results: 
            </p>
            <div class='image'>
                <img src="/hw10/injection.png" alt="injection_img" id="injection_img">
            </div>
            <p>
                And the effect of the injection of JavaScript method <b>alert</b> is to display an alert 
                every time I enter this page which lists the survey results.
            </p>
            <div class='image'>
                <img src="/hw10/attack.png" alt="attack_img" id="attack_img">
            </div>
            <p>
                I also tried to make an SQL injection using the query function that I created in homework 4,
                which is able to find guests by their names. Similar to the previous scenario, the <b>addslashes</b>
                method in PHP was preventing me from inserting any text with quotes. So I temorarily removed
                that method and typed&nbsp;&nbsp;<code>zhihan' OR 1 = 1; #</code>&nbsp;&nbsp;, and here was what I got:
            </p>
            <div class='image'>
                <img src="/hw10/sql_inject.png" alt="sql_inject" id="sql_inject">
            </div>
            <p>
                And if I kept the <a>addslashes</a> function in my PHP script for SQL query, the result would
                be like this:
            </p>
            <div class='image'>
                <img src="/hw10/sql_normal.png" alt="sql_normal" id="sql_normal">
            </div>
        </div>
        <div id="hw10-2" style="padding-left: 20px; margin: 30px 0;">
            <p>
                <b>Q2</b>: Setup a wiki, and use wiki to publish some content.
            </p>
            <p>
                <b>A2</b>: I have set up my wiki using the recommended <b>DokuWiki</b>.<br>
                The homepage of my wiki can be accessed 
                <a href="http://162.105.146.123:8015/dokuwiki/doku.php?id=start">here</a>.<br>
                I also create another wiki page for the term "Peking University",
                which can be accessed <a href="http://162.105.146.123:8015/dokuwiki/doku.php?id=pku">here</a>.
            </p>
        </div>
        <footer>
            <a href="/index.html">Return</a> to homepage.
        </footer>
    </body>
</html>